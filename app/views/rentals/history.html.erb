<div class="container mt-4">
  <h2>Rental History</h2>

  <%= form_with url: rentals_history_path, method: :get, local: true do %>
    <div class="mb-3">
      <%= label_tag :customer_id, "Select Customer", class: "form-label" %>
      <%= select_tag :customer_id, options_from_collection_for_select(@customers, :id, :name, params[:customer_id]), prompt: "Choose a customer", class: "form-select" %>
    </div>

    <%= submit_tag "View History", class: "btn btn-primary" %>
  <% end %>

  <% if @rentals.present? %>
    <hr>
    <h4>Books rented by <%= @selected_customer.name %></h4>
    <table class="table table-bordered mt-3">
      <thead class="table-light">
        <tr>
          <th>Book Title</th>
          <th>Date Rented</th>
          <th>Date Returned</th>
        </tr>
      </thead>
      <tbody>
        <% @rentals.each do |rental| %>
          <tr>
            <td><%= rental.book.title %></td>
            <td><%= rental.rented_on %></td>
            <td><%= rental.returned_on %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% end %>
</div>
